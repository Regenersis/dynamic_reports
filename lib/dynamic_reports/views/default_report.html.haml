- if report.class_name.nil?
  %style{type => "text/css"}
    \.dynamic_report .report_title {
    font-size:16pt;
    font-weight:bold;
    margin:10px 0px;
    }
    \.dynamic_report .report_subtitle {
    font-size:14pt;
    color:black;
    margin:10px 0px;
    }
    \.dynamic_report table tr th {
    color: white;
    background: #666666;
    padding:5px;
    }
    \.dynamic_report table tr td {
    border: 1px solid #333333;
    padding:3px 15px;
    }
    \.dynamic_report .report_charts {
    width:100%;
    }
    \.dynamic_report .report_chart {
    margin:15px;
    }
    \.dynamic_report .subreport_row td {
    padding: 10px 10px 10px 20px;
    background-color: #FFFFCC;
    font-size: 90%;
    }
    \.dynamic_report .subreport table tr td {
    border: 1px dotted #CCCC99;
    padding:3px 5px;
    background-color: white;
    }    
    \.dynamic_report .subreport table tr th {
    color: black;
    background: #CCCCCC;
    padding:3px;
    }

.dynamic_report{ :id => report.class_name }
  - if report.title
    %h2.report_title
      = report.title

  - if report.sub_title
    %h3.report_sub_title
      = report.sub_title

  %table.report{ :cellspacing => "0", :border => "0", :cellpadding => "0" }
    %thead.report_header
      %tr.report_header_row
        - report.columns.each do |column|
          %th
            - if column.is_a?(Hash) 
              - if column.keys.include?(:heading)            
                = options[:titleize] ? titleize(column[:heading]) : column[:heading]
              -else
                = options[:titleize] ? titleize(column[:column]) : column[:column]                
            -else
              = options[:titleize] ? titleize(column) : column
    %tbody.report_body
      - report.records.each do |record|
        %tr.report_row
          - report.columns.each do |column|
            %td
              = (options[:commas] == true) ? commify(linkcheck(record,column)) : linkcheck(record,column)
        %tr.subreport_row{:style => "display:none"}
          %td{:colspan => report.columns.size}
            .subreport

  - if report.charts && report.charts.class === Hash
    - report.charts.each_pair do |name, chart|
      .chart
        %h2
          = name
        %img{:src => chart_url(chart), :alt => name}

